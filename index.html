<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LoreVault - Catalogue personnel de médias stocké localement. Aucune donnée envoyée sur Internet.">
    <meta name="theme-color" content="#4F46E5">
    <title>LoreVault - Catalogue Média Privé</title>
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="lorevault.png" type="image/png">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-book-open"></i>
                    <h1>LoreVault</h1>
                </div>
                <div class="header-actions">
                    <button id="theme-toggle" class="btn-icon" title="Changer le thème">
                        <i class="fas fa-palette"></i>
                    </button>
                    <button id="stats-toggle" class="btn-icon" title="Statistiques">
                        <i class="fas fa-chart-bar"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Theme Selector Modal -->
    <div id="theme-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-palette"></i> Choisir un thème</h2>
                <button class="modal-close" onclick="closeThemeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="theme-grid">
                <button class="theme-card" data-theme="dark">
                    <i class="fas fa-moon"></i>
                    <span>Sombre</span>
                </button>
                <button class="theme-card" data-theme="light">
                    <i class="fas fa-sun"></i>
                    <span>Clair</span>
                </button>
                <button class="theme-card" data-theme="neon">
                    <i class="fas fa-bolt"></i>
                    <span>Néon</span>
                </button>
                <button class="theme-card" data-theme="monochrome">
                    <i class="fas fa-circle-half-stroke"></i>
                    <span>Monochrome</span>
                </button>
                <button class="theme-card" data-theme="royal">
                    <i class="fas fa-crown"></i>
                    <span>Royal</span>
                </button>
                <button class="theme-card" data-theme="vintage">
                    <i class="fas fa-camera-retro"></i>
                    <span>Vintage</span>
                </button>
                <button class="theme-card" data-theme="glassmorphism">
                    <i class="fas fa-gem"></i>
                    <span>Glassmorphism</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Stats Modal -->
    <div id="stats-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-chart-bar"></i> Statistiques & Réalisations</h2>
                <button class="modal-close" onclick="closeStatsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="stats-content" id="stats-content">
                <!-- Stats will be injected here -->
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Search & Filters -->
            <div class="controls-section">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="Rechercher un média...">
                </div>
                
                <div class="filters">
                    <select id="category-filter" class="filter-select">
                        <option value="all">Toutes les catégories</option>
                        <option value="Anime">Anime</option>
                        <option value="Manga">Manga</option>
                        <option value="Série">Série</option>
                        <option value="Film">Film</option>
                        <option value="Livre">Livre</option>
                        <option value="Light Novel">Light Novel</option>
                        <option value="Créateur de contenu">Créateur de contenu</option>
                        <option value="Podcast">Podcast</option>
                        <option value="BD/Comics">BD/Comics</option>
                        <option value="Jeux vidéo">Jeux vidéo</option>
                        <option value="Webtoon">Webtoon</option>
                    </select>
                    
                    <select id="sort-filter" class="filter-select">
                        <option value="date-desc">Plus récents</option>
                        <option value="date-asc">Plus anciens</option>
                        <option value="rating-desc">Meilleure note</option>
                        <option value="rating-asc">Moins bonne note</option>
                        <option value="title-asc">Titre (A-Z)</option>
                        <option value="favorites">Favoris</option>
                    </select>
                    
                    <button id="add-media-btn" class="btn-primary">
                        <i class="fas fa-plus"></i> Ajouter un média
                    </button>
                </div>
            </div>

            <!-- Media Grid -->
            <div id="media-grid" class="media-grid">
                <!-- Media cards will be injected here -->
            </div>
            
            <!-- Empty State -->
            <div id="empty-state" class="empty-state hidden">
                <i class="fas fa-inbox"></i>
                <h3>Aucun média trouvé</h3>
                <p>Commencez par ajouter votre premier média !</p>
                <button class="btn-primary" onclick="openAddModal()">
                    <i class="fas fa-plus"></i> Ajouter un média
                </button>
            </div>
        </div>
    </main>

    <!-- Add/Edit Media Modal -->
    <div id="media-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title"><i class="fas fa-plus"></i> Ajouter un média</h2>
                <button class="modal-close" onclick="closeMediaModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="media-form" class="media-form">
                <input type="hidden" id="media-id">
                
                <div class="form-group">
                    <label for="media-title">
                        <i class="fas fa-heading"></i> Titre *
                    </label>
                    <input type="text" id="media-title" required placeholder="Ex: One Piece">
                </div>
                
                <div class="form-group">
                    <label for="media-category">
                        <i class="fas fa-tag"></i> Catégorie *
                    </label>
                    <select id="media-category" required>
                        <option value="">Sélectionner...</option>
                        <option value="Anime">Anime</option>
                        <option value="Manga">Manga</option>
                        <option value="Série">Série</option>
                        <option value="Film">Film</option>
                        <option value="Livre">Livre</option>
                        <option value="Light Novel">Light Novel</option>
                        <option value="Créateur de contenu">Créateur de contenu</option>
                        <option value="Podcast">Podcast</option>
                        <option value="BD/Comics">BD/Comics</option>
                        <option value="Jeux vidéo">Jeux vidéo</option>
                        <option value="Webtoon">Webtoon</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="media-rating">
                        <i class="fas fa-star"></i> Note (/10)
                    </label>
                    <div class="rating-input">
                        <input type="number" id="media-rating" min="0" max="10" step="0.1" value="5">
                        <span id="rating-display">5.0</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="media-image">
                        <i class="fas fa-image"></i> URL de l'image
                    </label>
                    <input type="url" id="media-image" placeholder="https://exemple.com/image.jpg">
                </div>
                
                <div class="form-group">
                    <label for="media-notes">
                        <i class="fas fa-comment"></i> Notes personnelles
                    </label>
                    <textarea id="media-notes" rows="3" placeholder="Vos impressions, commentaires..."></textarea>
                </div>
                
                <div class="form-group checkbox-group">
                    <label>
                        <input type="checkbox" id="media-favorite">
                        <i class="fas fa-heart"></i> Marquer comme favori
                    </label>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeMediaModal()">
                        <i class="fas fa-times"></i> Annuler
                    </button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Enregistrer
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>
                <i class="fas fa-lock"></i> 
                LoreVault - Toutes vos données sont stockées localement dans votre navigateur.
                <a href="#" onclick="showPrivacyInfo(event)">En savoir plus</a>
            </p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="records.js"></script>
    <script src="app.js"></script>
    <script src="script.js"></script>
    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(reg => console.log('Service Worker enregistré', reg))
                .catch(err => console.log('Erreur Service Worker', err));
        }
    </script>
</body>
</html>
